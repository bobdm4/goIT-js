{"version":3,"sources":["webpack:///./js/getGeoPosition.js","webpack:///./js/fetchWeather.js"],"names":["options","box","document","querySelector","timeout","maximumAge","Promise","res","rej","navigator","geolocation","getCurrentPosition","then","position","fetch","baseUrl","coords","latitude","longitude","response","json","weather","textContent","location","name","current","feelslike_c","humidity","wind_kph","condition","text","src","icon","classList","remove","PNotify","success","title","catch","error","add","form","inputCity","resource","regKey","addEventListener","e","preventDefault","city","value"],"mappings":"+KAOQA,cANFC,EAAMC,SAASC,cAAc,aAM3BH,EAAU,CACdI,QAAS,IACTC,WAAY,OAEP,IAAIC,QAAQ,SAACC,EAAKC,GACvBC,UAAUC,YAAYC,mBACpBJ,EACAC,EACAR,MAKHY,KAAK,SAAAC,GACJC,MAAMC,8EAAiCF,EAASG,OAAOC,SAAjD,IAA6DJ,EAASG,OAAOE,WAChFN,KAAK,SAAAO,GAAQ,OAAIA,EAASC,SAC1BR,KAAK,SAAAS,GACJnB,SAASC,cAAc,+BAA+BmB,YAAcD,EAAQE,SAASC,KACrFtB,SAASC,cAAc,2BAA2BmB,YAAcD,EAAQI,QAAQC,YAAc,KAC9FxB,SAASC,cAAc,+BAA+BmB,YAAcD,EAAQI,QAAQE,SAAW,IAC/FzB,SAASC,cAAc,2BAA2BmB,YAAcD,EAAQI,QAAQG,SAAW,OAC3F1B,SAASC,cAAc,iCAAiCmB,YAAcD,EAAQI,QAAQI,UAAUC,KAChG5B,SAASC,cAAc,SAAS4B,IAAMV,EAAQI,QAAQI,UAAUG,OAEpE/B,EAAIgC,UAAUC,OAAO,aAErBC,IAAQC,QAAQ,CACdC,MAAO,kBACPP,KAAM,wBAITQ,MAAM,SAAAC,GAELJ,IAAQI,MAAM,CACZF,MAAO,aACPP,KAAM,sBAER7B,EAAIgC,UAAUO,IAAI,eC7CtB,IAAMC,EAAOvC,SAASC,cAAc,gBAC9BuC,EAAYxC,SAASC,cAAc,SACnCY,EAAU,2BACV4B,EAAW,gBACXC,EAAS,yCACT3C,EAAMC,SAASC,cAAc,YAEnCsC,EAAKI,iBAAiB,SAEtB,SAAoBC,GAClBA,EAAEC,iBACF,IAAIC,EAAON,EAAUO,MACrBhD,EAAIgC,UAAUC,OAAO,aACrBpB,MAAMC,EAAU4B,EAAWC,EAASI,GACjCpC,KAAK,SAAAO,GAAQ,OAAIA,EAASC,SAC1BR,KAAK,SAAAS,GACJnB,SAASC,cAAc,+BAA+BmB,YAAcD,EAAQE,SAASC,KACrFtB,SAASC,cAAc,2BAA2BmB,YAAcD,EAAQI,QAAQC,YAAc,KAC9FxB,SAASC,cAAc,+BAA+BmB,YAAcD,EAAQI,QAAQE,SAAW,IAC/FzB,SAASC,cAAc,2BAA2BmB,YAAcD,EAAQI,QAAQG,SAAW,OAC3F1B,SAASC,cAAc,iCAAiCmB,YAAcD,EAAQI,QAAQI,UAAUC,KAChG5B,SAASC,cAAc,SAAS4B,IAAMV,EAAQI,QAAQI,UAAUG","file":"main.42b10feb56edba4ef169.js","sourcesContent":["import PNotify from 'pnotify/dist/es/PNotify';\r\nconst box = document.querySelector('#weather');\r\nconst baseUrl = 'https://api.apixu.com/v1';\r\nconst resource = '/current.json';\r\nconst regKey = '?key=fd99f0f33339427587270934190508&q=';\r\n\r\nconst getCurrentPosition = () => {\r\n  const options = {\r\n    timeout: 5000,\r\n    maximumAge: 30 * 60 * 60 * 1000,\r\n  }\r\n  return new Promise((res, rej) => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      res,\r\n      rej,\r\n      options)\r\n  })\r\n}\r\n\r\ngetCurrentPosition()\r\n  .then(position => {\r\n    fetch(baseUrl + resource + regKey + `${position.coords.latitude},${position.coords.longitude}`)\r\n      .then(response => response.json())\r\n      .then(weather => {\r\n        document.querySelector('span[data-field=\"location\"]').textContent = weather.location.name;\r\n        document.querySelector('span[data-field=\"temp\"]').textContent = weather.current.feelslike_c + ' ℃';\r\n        document.querySelector('span[data-field=\"humidity\"]').textContent = weather.current.humidity + '%';\r\n        document.querySelector('span[data-field=\"wind\"]').textContent = weather.current.wind_kph + ' kph';\r\n        document.querySelector('span[data-field=\"conditions\"]').textContent = weather.current.condition.text;\r\n        document.querySelector('.icon').src = weather.current.condition.icon\r\n      });\r\n    box.classList.remove('is-hidden');\r\n\r\n    PNotify.success({\r\n      title: 'Отличный выбор!',\r\n      text: 'Я сделаю все сам!'\r\n\r\n    });\r\n  })\r\n  .catch(error => {\r\n\r\n    PNotify.error({\r\n      title: 'Ok, ok, ok',\r\n      text: 'Теперь ты ниндзя!'\r\n    });\r\n    box.classList.add('is-hidden');\r\n  });","const form = document.querySelector('.search-form');\r\nconst inputCity = document.querySelector('input')\r\nconst baseUrl = 'https://api.apixu.com/v1';\r\nconst resource = '/current.json';\r\nconst regKey = '?key=fd99f0f33339427587270934190508&q=';\r\nconst box = document.querySelector('#weather');\r\n\r\nform.addEventListener('submit', userChoice);\r\n\r\nfunction userChoice(e) {\r\n  e.preventDefault();\r\n  let city = inputCity.value;\r\n  box.classList.remove('is-hidden');\r\n  fetch(baseUrl + resource + regKey + city )\r\n    .then(response => response.json())\r\n    .then(weather => {\r\n      document.querySelector('span[data-field=\"location\"]').textContent = weather.location.name;\r\n      document.querySelector('span[data-field=\"temp\"]').textContent = weather.current.feelslike_c + ' ℃';\r\n      document.querySelector('span[data-field=\"humidity\"]').textContent = weather.current.humidity + '%';\r\n      document.querySelector('span[data-field=\"wind\"]').textContent = weather.current.wind_kph + ' kph';\r\n      document.querySelector('span[data-field=\"conditions\"]').textContent = weather.current.condition.text;\r\n      document.querySelector('.icon').src = weather.current.condition.icon\r\n    });\r\n};"],"sourceRoot":""}